# YOLO 数据集预处理工具 - 发布指南

## 版本信息
- **版本号**: 1.0.0
- **构建日期**: 2026-02-27
- **适用平台**: Windows 10/11

---

## 📦 发布流程

### 1. 环境准备

确保已安装以下工具：
- Python 3.8+
- PyInstaller
- Inno Setup 6（用于生成安装包）

### 2. 执行打包

#### 步骤 1：PyInstaller 打包
```batch
build_release.bat
```

**预期结果**：
```
dist/YOLO数据集预处理工具/
├── YOLO数据集预处理工具.exe    ← 主程序
├── _internal/                    ← 依赖库文件夹
│   ├── PySide6/
│   ├── ...
├── *.dll
└── ...
```

**大小估计**：约 150-200 MB

#### 步骤 2：生成安装包（可选）
```batch
build_installer.bat
```

**预期结果**：
```
installer/YOLO数据集预处理工具_v1.0.0_Setup.exe
```

---

## 📁 发布目录结构

### onedir 模式（推荐）
```
dist/YOLO数据集预处理工具/
├── YOLO数据集预处理工具.exe       # 主程序（约 5 MB）
├── _internal/                      # 依赖文件夹
│   ├── PySide6/                   # Qt 库
│   │   ├── Qt6Core.dll
│   │   ├── Qt6Gui.dll
│   │   ├── Qt6Widgets.dll
│   │   └── ...
│   ├── api-ms-*.dll               # Windows API
│   ├── python38.dll
│   ├── base_library.zip           # Python 标准库
│   └── ...
├── Qt6Core.dll                     # Qt 主库
├── Qt6Gui.dll
├── Qt6Widgets.dll
└── ...
```

---

## 🚀 安装包功能

使用 Inno Setup 生成的安装包提供：

### 安装过程
1. 欢迎页面
2. 选择安装目录（默认：`C:\Program Files\YOLO数据集预处理工具`）
3. 选择附加任务：
   - ☑ 创建桌面快捷方式
   - ☐ 创建快速启动图标（Windows 7）
4. 安装文件
5. 完成（可选择立即运行）

### 安装后
- **开始菜单项**：YOLO数据集预处理工具
- **桌面快捷方式**：YOLO数据集预处理工具（可选）
- **卸载支持**：控制面板 → 程序和功能

---

## ✅ 测试清单

### 打包验证
- [ ] 运行 `dist/YOLO数据集预处理工具/YOLO数据集预处理工具.exe`
- [ ] 程序正常启动，无错误提示
- [ ] 所有功能正常（Step 1-6）
- [ ] 关闭程序正常退出

### 安装包验证
- [ ] 双击安装包，安装向导正常显示
- [ ] 安装到默认目录成功
- [ ] 桌面快捷方式可用
- [ ] 开始菜单项可用
- [ ] 程序可正常运行
- [ ] 卸载功能正常

---

## 📝 发布前检查

- [ ] 版本号正确（release.spec, installer_setup.iss）
- [ ] 所有功能测试通过
- [ ] 无控制台窗口（console=False）
- [ ] 图标已设置（可选）
- [ ] 删除 build/ 和旧的 dist/ 文件夹

---

## 🛠️ 常见问题

### Q1: 打包后程序无法启动
**A**: 检查是否缺少 DLL 依赖，使用 Dependency Walker 检查

### Q2: 打包文件过大
**A**: 已排除 numpy, pandas 等非必需库，当前大小合理

### Q3: 杀毒软件误报
**A**: 使用数字签名（可选）或提交样本到杀毒厂商白名单

### Q4: 中文路径问题
**A**: 所有文件操作已使用 UTF-8 编码，支持中文路径

---

## 📦 分发建议

### 方式 1：直接分发打包文件夹（推荐快速测试）
1. 压缩 `dist/YOLO数据集预处理工具/` 文件夹为 ZIP
2. 用户解压后直接运行 exe

### 方式 2：分发安装包（推荐正式发布）
1. 分发 `YOLO数据集预处理工具_v1.0.0_Setup.exe`
2. 用户双击安装

---

## 版本历史

### v1.0.0 (2026-02-27)
- ✅ 初始版本发布
- ✅ 完整实现 Step 1-6 功能
- ✅ 支持 Windows 10/11
- ✅ 提供安装包和绿色版
